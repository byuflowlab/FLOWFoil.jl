"""
    LegacyXfoil <: Method

In general usage, this struct is generated by calling the LegacyXfoil constructor.

# Fields
- `re::Float64`     
- `mach::Float64` 
- `npan::Integer`
"""
struct LegacyXfoil{Tre, Tma, Tnp} <: Method
    re::Tre           # Reynolds number
    mach::Tma         # Mach number
    npan::Tnp         # Number of panels
end

"""
    LegacyXfoil(
        reynolds=136, mach=0.0; npan=140
    )

Constructor for LegacyXfoil type.

# Default Arguments
- `reynolds::Float=1e6` : Reynolds number
- `mach::Float=0.0` : Mach number

# Keyword Arguments
- `npan::Integer=140` : Number of panels for Xfoil

# Returns
- `method::LegacyXfoil` : LegacyXfoil method object

# LegacyXfoil Method Fields
- `Re::Vector{Float}` : Reynolds Number(s)
- `Ma::Float=0.0` : Mach Number
- `npan::Int=140` : Number of panels for Xfoil
"""

function LegacyXfoil(reynolds, mach; npan=140)
    return LegacyXfoil(reynolds, mach, npan)
end

"""
    LegacyXFOutputs

# Fields
- `cl::AbstractArray{Float}`
- `cm::AbstractArray{Float}`
"""
@kwdef struct LegacyXFOutputs{Tcl, Tcm}
    cl::Tcl
    cm::Tcm
end

"""
    analyze_lxf(coordinates, flow_angles; method=LegacyXfoil())

Analysis function for LegacyXfoil.

# Arguments
- `coordinates::Matrix{Float}` : [x y] coordinates
- `flow_angles::Vector{Float}` : angles of attack at which to analyze

# Keyword Arguments
- `method::LegacyXfoil` : A LegacyXfoil method object.

# Returns
- `outputs::LegacyXFOutputs` : outputs object with fields:
    - `cl::AbstractArray{Float}` : vector of the lift coefficients
    - `cm::AbstractArray{Float}` : vector of the moment coefficients
"""
function analyze_lxf(coordinates, flow_angles; method=LegacyXfoil())

    x = coordiantes[:, 1]
    y = coordinates[:, 2]

    # - Run LegacyXfoil - #
    cl, cm = Xfoil.alpha_sweep(x, y, flow_angles; re=method.re, ma=method.ma, npan=method.npan)
    
    # - Return Outputs - #
    return LegacyXFOutputs(cl, cm)
end
